# **8.2 运算符重载**

**运算符重载是对已有的运算符赋予多重含义，本质是函数的重载**

## 1.运算符重载的规则

注意以下3种运算符不得重载：类属运算符**“.”** ，成员指针运算符**“.*”** ， 作用域分辨符**“::”** ， 三目运算符**"?:"** 

### 语法形式：

 ```C++
 返回类型 operator 运算符 （形参表）
 {
   函数体
 }
 ```

*提示：若声明为非成员函数，则一般对其进行友元声明*



## 2.运算符重载为成员函数

### 2.1 双目运算符

对于**oprd1 B oprd2**而言，若oprd1为A类的对象，oprd2为P类的对象，那么将B重载为A的成员函数，其形参类型为P类.

故重载后，表达式**oprd1 B oprd2**等同于调用**oprd1.operator B（oprd2）**.

>  **EG 8-1**
>
> **将复数类加减法重载为成员函数，实现复数的加减运算**

```c++
#include <iostream>

using namespace std;
class complex
{
public:
    complex(double r,double i):real(r),image(i){};
    complex operator+(const complex &c)const;
    void show(){cout<<real<<" "<<image<<endl;}
    
private:
    double real;
    double image;
};

complex complex::operator+(const complex &c)const //第一个complex是返回类型
{
    return complex(c.real+real,c.image+image); //会创建一个临时对象
  /*return complex(c.real+this->real,c.image+this->image);此条语句使用了this指针，其效果与上一条完全一样*/
}

int main()
{
    complex c0(1,2),c1(2,4);
    complex* ptr;
    ptr=&c0; //采用指针形式调用函数
    ptr->show();
    *ptr=*ptr+c1;
    ptr->show();
    return 0;
}

```

